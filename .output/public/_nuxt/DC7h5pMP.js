import{_ as h,r as d,o as p,e as m,t as r,x as s,B as w,y as c,J as y,K as S,v as l}from"./DVNOL9sH.js";class g{constructor(e,t="guest",n="user"){this.url=e,this.username=t,this.role=n,this.ws=null,this.listeners=[]}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("WebSocket Connected"),this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify({username:this.username,role:this.role})):this.ws.addEventListener("open",()=>{this.ws.send(JSON.stringify({username:this.username,role:this.role}))})},this.ws.onmessage=e=>{const t=JSON.parse(e.data);console.log("WebSocket received message:",t),this.listeners.forEach(n=>n(t))},this.ws.onclose=()=>{console.log("WebSocket Disconnected")},this.ws.onerror=e=>{console.error("WebSocket Error:",e)}}addListener(e){this.listeners.push(e)}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}disconnect(){this.ws&&this.ws.close()}}const f={class:"admin-panel"},_={class:"count"},v={key:0,class:"players-table"},b={key:1,class:"no-players"},k="ws://localhost:8080/game",N="admin",W="admin",E={__name:"view",setup(u){const e=d(0),t=d([]),n=new g(k,N,W);return p(()=>{n.connect(),n.addListener(a=>{a.type==="playersInfo"&&(e.value=a.count,t.value=a.players)})}),m(()=>{n.disconnect()}),(a,o)=>(l(),r("div",f,[o[2]||(o[2]=s("h2",null,"Panel Admin",-1)),s("p",_,[o[0]||(o[0]=w("Jugadores conectados: ")),s("strong",null,c(e.value),1)]),t.value.length?(l(),r("table",v,[o[1]||(o[1]=s("thead",null,[s("tr",null,[s("th",null,"Nombre"),s("th",null,"Placa")])],-1)),s("tbody",null,[(l(!0),r(y,null,S(t.value,i=>(l(),r("tr",{key:i.plate},[s("td",null,c(i.name),1),s("td",null,c(i.plate),1)]))),128))])])):(l(),r("p",b,"No hay jugadores conectados."))]))}},O=h(E,[["__scopeId","data-v-75d4d2b0"]]);export{O as default};
