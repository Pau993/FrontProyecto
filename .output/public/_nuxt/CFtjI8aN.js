import{_ as h,r as u,o as p,e as m,x as r,z as s,D as w,A as c,M as y,N as S,y as l}from"./0Y2rBl_W.js";class f{constructor(e,t="guest",n="user"){this.url=e,this.username=t,this.role=n,this.ws=null,this.listeners=[]}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("WebSocket Connected"),this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify({username:this.username,role:this.role})):this.ws.addEventListener("open",()=>{this.ws.send(JSON.stringify({username:this.username,role:this.role}))})},this.ws.onmessage=e=>{const t=JSON.parse(e.data);console.log("WebSocket received message:",t),this.listeners.forEach(n=>n(t))},this.ws.onclose=()=>{console.log("WebSocket Disconnected")},this.ws.onerror=e=>{console.error("WebSocket Error:",e)}}addListener(e){this.listeners.push(e)}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}disconnect(){this.ws&&this.ws.close()}}const g={class:"admin-panel"},_={class:"count"},v={key:0,class:"players-table"},k={key:1,class:"no-players"},b="ws://localhost:8080/game",N="admin",W="admin",E={__name:"view",setup(d){const e=u(0),t=u([]),n=new f(b,N,W);return p(()=>{n.connect(),n.addListener(a=>{a.type==="playersInfo"&&(e.value=a.count,t.value=a.players)})}),m(()=>{n.disconnect()}),(a,o)=>(l(),r("div",g,[o[2]||(o[2]=s("h2",null,"Panel Admin",-1)),s("p",_,[o[0]||(o[0]=w("Jugadores conectados: ")),s("strong",null,c(e.value),1)]),t.value.length?(l(),r("table",v,[o[1]||(o[1]=s("thead",null,[s("tr",null,[s("th",null,"Nombre"),s("th",null,"Placa")])],-1)),s("tbody",null,[(l(!0),r(y,null,S(t.value,i=>(l(),r("tr",{key:i.plate},[s("td",null,c(i.name),1),s("td",null,c(i.plate),1)]))),128))])])):(l(),r("p",k,"No hay jugadores conectados. veamos que pasa"))]))}},x=h(E,[["__scopeId","data-v-675cc22f"]]);export{x as default};
